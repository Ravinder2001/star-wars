<!-- @format -->

<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Document</title>
		<style>
			body {
				background-color: black;
			}
			#query {
				width: 400px;
				height: 30px;
				margin-left: 32%;
				margin-top: 50px;
				font-size: 20px;
				border-radius: 8px;
			}
			#btn {
				height: 37px;
				border-radius: 8px;
				font-size: 18px;

				cursor: pointer;
				background-color: yellow;
			}
			#movies {
				display: none;
				width: 404px;
				height: 260px;
				border: 2px solid black;
				border-top: none;
				overflow: scroll;
				font-size: 20px;
				margin-left: 32%;
				border-radius: 5px;
				cursor: pointer;
				background-color: white;
			}
			#img {
				width: 250px;
				height: 150px;
				margin-left: 38%;
				margin-top: 100px;
			}
		</style>
	</head>
	<body>
		<div>
			<img
				src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTXWJ5MqTvS7t6nxIXgjSNjYy1BCQ66r2NQVQ&usqp=CAU"
				id="img"
			/>
		</div>
		<input
			type="text"
			id="query"
			oninput="throtal()"
			placeholder="Search Characters"
		/>
		<button id="btn">Search</button>
		<div id="movies"></div>
	</body>
</html>
<script>
	let movies = document.getElementById('movies');
	var timerId;
	async function search() {
		let query = document.getElementById('query').value;

		let res = await fetch(`https:swapi.dev/api/people/?search=${query}`);
		let data = await res.json();

		return data.results;
	}
	function throtal() {
		if (timerId) {
			return false;
		}
		timerId = setTimeout(() => {
			main();
			timerId = undefined;
		}, 100);
	}
	function append(d) {
		movies.style.display = 'block';
		movies.innerHTML = null;
		d.forEach(({ name }) => {
			let p = document.createElement('p');
			p.addEventListener('mouseover', function () {
				p.style.backgroundColor = 'yellow';
			});
			p.addEventListener('mouseout', function () {
				p.style.backgroundColor = 'white';
			});
			p.innerText = name;
			movies.append(p);
		});
	}
	async function main() {
		let movies = await search();
		append(movies);
	}
</script>
